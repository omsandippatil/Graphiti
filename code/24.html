<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimum Swaps to Sort Array</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: white;
            color: black;
            height: 100vh;
            overflow: hidden;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        .left-panel {
            width: 50%;
            padding: 20px;
            border-right: 2px solid black;
            overflow-y: auto;
        }

        .right-panel {
            width: 50%;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .problem-section {
            margin-bottom: 15px;
            padding: 10px;
            border: 1px solid black;
        }

        .controls {
            margin-bottom: 15px;
            text-align: center;
        }

        button {
            background: white;
            color: black;
            border: 2px solid black;
            padding: 8px 15px;
            margin: 0 5px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }

        button:hover {
            background: black;
            color: white;
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: white;
            color: black;
        }

        .info-section {
            margin-bottom: 15px;
            padding: 10px;
            border: 1px solid black;
        }

        .info-title {
            font-weight: bold;
            margin-bottom: 5px;
            text-decoration: underline;
        }

        .variables-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
            margin-top: 5px;
        }

        .variable {
            padding: 5px;
            border: 1px solid black;
            text-align: center;
            background: white;
        }

        .variable.active {
            background: yellow;
        }

        .variable.increment {
            background: lightgreen;
        }

        .variable.decrement {
            background: lightcoral;
        }

        .condition {
            padding: 5px;
            margin: 2px 0;
            border: 1px solid black;
        }

        .condition.true {
            background: lightgreen;
        }

        .condition.false {
            background: lightcoral;
        }

        .operation {
            padding: 5px;
            margin: 2px 0;
            border: 1px solid black;
        }

        .operation.increment {
            background: lightgreen;
        }

        .operation.decrement {
            background: lightcoral;
        }

        .operation.swap {
            background: lightblue;
        }

        .array-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }

        .array {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }

        .array-cell {
            width: 60px;
            height: 60px;
            border: 2px solid black;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            position: relative;
            background: white;
        }

        .array-cell.current {
            background: yellow;
        }

        .array-cell.compared {
            background: lightblue;
        }

        .array-cell.swapped {
            background: lightgreen;
        }

        .pointer {
            position: absolute;
            top: -30px;
            font-size: 12px;
            font-weight: bold;
            padding: 2px 5px;
            border-radius: 3px;
            color: white;
            z-index: 10;
        }

        .pointer.current {
            background: deeppink;
        }

        .pointer.target {
            background: orange;
        }

        .collapsible {
            margin-top: 20px;
            border: 1px solid black;
        }

        .collapsible-header {
            background: black;
            color: white;
            padding: 10px;
            cursor: pointer;
            user-select: none;
        }

        .collapsible-content {
            display: none;
            padding: 15px;
            border-top: 1px solid black;
        }

        .collapsible-content.show {
            display: block;
        }

        .step-counter {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="left-panel">
            <div class="problem-section">
                <div class="info-title">Problem: Minimum Swaps to Sort Array</div>
                <div>Given an array, find minimum swaps needed to sort it.</div>
                <div>Example: [4,3,2,1] â†’ 2 swaps needed</div>
            </div>

            <div class="controls">
                <button id="prevBtn">Previous</button>
                <button id="nextBtn">Next</button>
                <button id="resetBtn">Reset</button>
            </div>

            <div class="step-counter" id="stepCounter">Step 0/0</div>

            <div class="info-section">
                <div class="info-title">Variables</div>
                <div class="variables-grid" id="variables"></div>
            </div>

            <div class="info-section">
                <div class="info-title">Current Condition</div>
                <div id="conditions"></div>
            </div>

            <div class="info-section">
                <div class="info-title">Current Operation</div>
                <div id="operations"></div>
            </div>

            <div class="info-section">
                <div class="info-title">Result</div>
                <div id="result">Swaps needed: 0</div>
            </div>
        </div>

        <div class="right-panel">
            <div class="array-container">
                <div>Current Array:</div>
                <div class="array" id="arrayDisplay"></div>
                <div>Original: [4,3,2,1]</div>
                <div>Target: [1,2,3,4]</div>
            </div>
        </div>
    </div>

    <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible('theory')">
            ðŸ“š Algorithm Theory & Explanation
        </div>
        <div class="collapsible-content" id="theory">
            <h3>Minimum Swaps Algorithm</h3>
            <p>The algorithm finds the minimum number of adjacent swaps needed to sort an array. It uses a cycle-finding approach where each element should be at position (value-1) in a 1-indexed system.</p>
            
            <h4>Key Concepts:</h4>
            <ul>
                <li>Each number should be at its correct position</li>
                <li>We find cycles in the permutation</li>
                <li>For a cycle of length n, we need (n-1) swaps</li>
            </ul>

            <h4>Edge Cases:</h4>
            <ul>
                <li>Already sorted array - 0 swaps needed</li>
                <li>Reverse sorted array - maximum swaps needed</li>
                <li>Single element - 0 swaps needed</li>
            </ul>

            <h4>Time Complexity: O(n)</h4>
            <h4>Space Complexity: O(n)</h4>
        </div>
    </div>

    <script>
        let currentStep = 0;
        let steps = [];
        let originalArray = [4, 3, 2, 1];

        function initializeSteps() {
            steps = [
                {
                    array: [4, 3, 2, 1],
                    variables: { swaps: 0, i: 0, n: 4, visited: "[]", cycle: 0 },
                    conditions: [],
                    operations: ["Initialize: Create visited array, set swaps = 0"],
                    current: -1,
                    target: -1,
                    result: 0
                },
                {
                    array: [4, 3, 2, 1],
                    variables: { swaps: 0, i: 0, n: 4, visited: "[false,false,false,false]", cycle: 0 },
                    conditions: ["i < n (0 < 4) âœ“", "!visited[0] (true) âœ“"],
                    operations: ["Check if element at index 0 is visited"],
                    current: 0,
                    target: -1,
                    result: 0
                },
                {
                    array: [4, 3, 2, 1],
                    variables: { swaps: 0, i: 0, n: 4, visited: "[false,false,false,false]", cycle: 1 },
                    conditions: ["arr[0] != 0+1 (4 != 1) âœ“"],
                    operations: ["Element 4 is not in correct position, start cycle"],
                    current: 0,
                    target: 3,
                    result: 0
                },
                {
                    array: [4, 3, 2, 1],
                    variables: { swaps: 0, i: 0, n: 4, visited: "[true,false,false,false]", cycle: 1 },
                    conditions: [],
                    operations: ["Mark visited[0] = true, move to position of element 4"],
                    current: 3,
                    target: 0,
                    result: 0
                },
                {
                    array: [4, 3, 2, 1],
                    variables: { swaps: 1, i: 0, n: 4, visited: "[true,false,false,true]", cycle: 1 },
                    conditions: ["arr[3] != 3+1 (1 != 4) âœ“"],
                    operations: ["Found cycle: 4â†’1, increment swaps"],
                    current: 0,
                    target: 3,
                    result: 1
                },
                {
                    array: [4, 3, 2, 1],
                    variables: { swaps: 1, i: 1, n: 4, visited: "[true,false,false,true]", cycle: 0 },
                    conditions: ["i < n (1 < 4) âœ“", "!visited[1] (true) âœ“"],
                    operations: ["Move to next unvisited element at index 1"],
                    current: 1,
                    target: -1,
                    result: 1
                },
                {
                    array: [4, 3, 2, 1],
                    variables: { swaps: 1, i: 1, n: 4, visited: "[true,false,false,true]", cycle: 1 },
                    conditions: ["arr[1] != 1+1 (3 != 2) âœ“"],
                    operations: ["Element 3 is not in correct position, start new cycle"],
                    current: 1,
                    target: 2,
                    result: 1
                },
                {
                    array: [4, 3, 2, 1],
                    variables: { swaps: 1, i: 1, n: 4, visited: "[true,true,false,true]", cycle: 1 },
                    conditions: [],
                    operations: ["Mark visited[1] = true, move to position of element 3"],
                    current: 2,
                    target: 1,
                    result: 1
                },
                {
                    array: [4, 3, 2, 1],
                    variables: { swaps: 2, i: 1, n: 4, visited: "[true,true,true,true]", cycle: 1 },
                    conditions: ["arr[2] != 2+1 (2 != 3) âœ“"],
                    operations: ["Found cycle: 3â†’2, increment swaps"],
                    current: 1,
                    target: 2,
                    result: 2
                },
                {
                    array: [4, 3, 2, 1],
                    variables: { swaps: 2, i: 4, n: 4, visited: "[true,true,true,true]", cycle: 0 },
                    conditions: ["i < n (4 < 4) âœ—"],
                    operations: ["All elements processed, algorithm complete"],
                    current: -1,
                    target: -1,
                    result: 2
                }
            ];
        }

        function renderStep() {
            const step = steps[currentStep];
            
            document.getElementById('stepCounter').textContent = `Step ${currentStep}/${steps.length - 1}`;
            
            renderArray(step.array, step.current, step.target);
            renderVariables(step.variables);
            renderConditions(step.conditions);
            renderOperations(step.operations);
            document.getElementById('result').textContent = `Swaps needed: ${step.result}`;
            
            document.getElementById('prevBtn').disabled = currentStep === 0;
            document.getElementById('nextBtn').disabled = currentStep === steps.length - 1;
        }

        function renderArray(array, currentIndex, targetIndex) {
            const container = document.getElementById('arrayDisplay');
            container.innerHTML = '';
            
            array.forEach((value, index) => {
                const cell = document.createElement('div');
                cell.className = 'array-cell';
                cell.textContent = value;
                
                if (index === currentIndex) {
                    cell.classList.add('current');
                    const pointer = document.createElement('div');
                    pointer.className = 'pointer current';
                    pointer.textContent = 'CURR';
                    cell.appendChild(pointer);
                }
                
                if (index === targetIndex) {
                    cell.classList.add('compared');
                    const pointer = document.createElement('div');
                    pointer.className = 'pointer target';
                    pointer.textContent = 'TARGET';
                    pointer.style.top = '-50px';
                    cell.appendChild(pointer);
                }
                
                container.appendChild(cell);
            });
        }

        function renderVariables(variables) {
            const container = document.getElementById('variables');
            container.innerHTML = '';
            
            Object.entries(variables).forEach(([key, value]) => {
                const div = document.createElement('div');
                div.className = 'variable';
                div.textContent = `${key}: ${value}`;
                container.appendChild(div);
            });
        }

        function renderConditions(conditions) {
            const container = document.getElementById('conditions');
            container.innerHTML = '';
            
            if (conditions.length === 0) {
                container.innerHTML = '<div>No conditions to evaluate</div>';
                return;
            }
            
            conditions.forEach(condition => {
                const div = document.createElement('div');
                div.className = 'condition';
                div.textContent = condition;
                
                if (condition.includes('âœ“')) {
                    div.classList.add('true');
                } else if (condition.includes('âœ—')) {
                    div.classList.add('false');
                }
                
                container.appendChild(div);
            });
        }

        function renderOperations(operations) {
            const container = document.getElementById('operations');
            container.innerHTML = '';
            
            operations.forEach(operation => {
                const div = document.createElement('div');
                div.className = 'operation';
                div.textContent = operation;
                
                if (operation.includes('increment') || operation.includes('Found cycle')) {
                    div.classList.add('swap');
                }
                
                container.appendChild(div);
            });
        }

        function toggleCollapsible(id) {
            const content = document.getElementById(id);
            content.classList.toggle('show');
        }

        document.getElementById('nextBtn').addEventListener('click', () => {
            if (currentStep < steps.length - 1) {
                currentStep++;
                renderStep();
            }
        });

        document.getElementById('prevBtn').addEventListener('click', () => {
            if (currentStep > 0) {
                currentStep--;
                renderStep();
            }
        });

        document.getElementById('resetBtn').addEventListener('click', () => {
            currentStep = 0;
            renderStep();
        });

        initializeSteps();
        renderStep();
    </script>
</body>
</html>

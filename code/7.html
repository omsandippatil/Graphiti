<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Missing Number Algorithm Visualizer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }
        
        body {
            background: white;
            color: black;
            height: 100vh;
            display: flex;
        }
        
        .left-panel {
            width: 50%;
            padding: 20px;
            border-right: 2px solid black;
            overflow-y: auto;
        }
        
        .right-panel {
            width: 50%;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .section {
            margin-bottom: 15px;
            border: 1px solid black;
            padding: 10px;
        }
        
        .section h3 {
            margin-bottom: 8px;
            font-size: 14px;
            text-transform: uppercase;
        }
        
        .problem-statement {
            font-size: 12px;
            line-height: 1.4;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }
        
        .controls button {
            padding: 8px 16px;
            background: white;
            border: 2px solid black;
            cursor: pointer;
            font-family: inherit;
            font-size: 12px;
        }
        
        .controls button:hover {
            background: black;
            color: white;
        }
        
        .controls button:disabled {
            background: #ccc;
            border-color: #ccc;
            cursor: not-allowed;
            color: #666;
        }
        
        .variables {
            font-size: 12px;
        }
        
        .variable {
            padding: 4px 8px;
            margin: 2px 0;
            border: 1px solid black;
            display: inline-block;
            min-width: 80px;
        }
        
        .variable.active {
            background: yellow;
        }
        
        .variable.increment {
            background: #90EE90;
        }
        
        .variable.decrement {
            background: #FFB6C1;
        }
        
        .condition {
            padding: 4px 8px;
            margin: 2px 0;
            border: 1px solid black;
            font-size: 11px;
        }
        
        .condition.true {
            background: #90EE90;
        }
        
        .condition.false {
            background: #FFB6C1;
        }
        
        .operation {
            padding: 4px 8px;
            margin: 2px 0;
            border: 1px solid black;
            font-size: 11px;
        }
        
        .operation.increment {
            background: #90EE90;
        }
        
        .operation.compare {
            background: #ADD8E6;
        }
        
        .operation.result {
            background: #DDA0DD;
        }
        
        .visualization {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .array-container {
            display: flex;
            gap: 5px;
            margin: 20px 0;
            position: relative;
        }
        
        .array-cell {
            width: 60px;
            height: 60px;
            border: 2px solid black;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            background: white;
            position: relative;
        }
        
        .array-cell.current {
            background: #FFD700;
            border-color: #FF1493;
            border-width: 3px;
        }
        
        .pointer {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 12px;
            font-weight: bold;
            padding: 2px 6px;
            border-radius: 3px;
            color: white;
        }
        
        .pointer.current {
            background: #FF1493;
        }
        
        .expected-container {
            margin: 20px 0;
            font-size: 14px;
        }
        
        .result-container {
            margin: 20px 0;
            padding: 10px;
            border: 2px solid black;
            font-size: 16px;
        }
        
        .collapsible {
            margin-top: 20px;
        }
        
        .collapsible-header {
            background: black;
            color: white;
            padding: 10px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .collapsible-content {
            display: none;
            padding: 10px;
            border: 1px solid black;
            border-top: none;
            font-size: 11px;
            line-height: 1.4;
        }
        
        .step-counter {
            font-size: 12px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="left-panel">
        <div class="section">
            <h3>Problem</h3>
            <div class="problem-statement">
                Find the missing integer in a sorted array.<br>
                Input: [1,2,4,5,6] → Output: 3<br>
                Compare current array value with expected sequential value.
            </div>
        </div>
        
        <div class="controls">
            <button onclick="previousStep()" id="prevBtn">Previous</button>
            <button onclick="nextStep()" id="nextBtn">Next</button>
            <button onclick="reset()" id="resetBtn">Reset</button>
        </div>
        
        <div class="step-counter" id="stepCounter">Step 0 of 6</div>
        
        <div class="section">
            <h3>Variables</h3>
            <div class="variables" id="variables">
                <div class="variable" id="var-i">i: 0</div>
                <div class="variable" id="var-expected">expected: 1</div>
                <div class="variable" id="var-current">current: -</div>
                <div class="variable" id="var-missing">missing: -</div>
            </div>
        </div>
        
        <div class="section">
            <h3>Current Condition</h3>
            <div id="conditions"></div>
        </div>
        
        <div class="section">
            <h3>Current Operation</h3>
            <div id="operations"></div>
        </div>
        
        <div class="section">
            <h3>Result</h3>
            <div id="result">Missing number: -</div>
        </div>
        
        <div class="collapsible">
            <div class="collapsible-header" onclick="toggleSection('theory')">▶ Theory & Algorithm Details</div>
            <div class="collapsible-content" id="theory">
                <strong>Algorithm:</strong> Linear scan comparing each array element with expected sequential values.<br><br>
                <strong>Approach:</strong> Iterate through array, compare arr[i] with expected value (i+1). When they don't match, the expected value is missing.<br><br>
                <strong>Time Complexity:</strong> O(n)<br>
                <strong>Space Complexity:</strong> O(1)<br><br>
                <strong>Edge Cases:</strong> Empty array, missing first element, missing last element, single element array.
            </div>
        </div>
        
        <div class="collapsible">
            <div class="collapsible-header" onclick="toggleSection('tricks')">▶ Tricks & Optimizations</div>
            <div class="collapsible-content" id="tricks">
                <strong>Alternative Methods:</strong><br>
                1. Sum formula: expected_sum - actual_sum<br>
                2. XOR approach: XOR all numbers 1 to n+1, then XOR with array elements<br>
                3. Binary search if array is guaranteed sorted<br><br>
                <strong>Boundary Checks:</strong> Handle cases where missing number is at start or end of sequence.
            </div>
        </div>
    </div>
    
    <div class="right-panel">
        <div class="visualization">
            <h3>Array Visualization</h3>
            <div class="array-container" id="arrayContainer">
                <div class="array-cell" id="cell-0">1</div>
                <div class="array-cell" id="cell-1">2</div>
                <div class="array-cell" id="cell-2">4</div>
                <div class="array-cell" id="cell-3">5</div>
                <div class="array-cell" id="cell-4">6</div>
            </div>
            <div class="expected-container" id="expectedDisplay">Expected sequence: 1, 2, 3, 4, 5, 6</div>
            <div class="result-container" id="resultDisplay">Algorithm Status: Ready to Start</div>
        </div>
    </div>

    <script>
        const array = [1, 2, 4, 5, 6];
        let currentStep = 0;
        let maxSteps = 6;
        let missing = -1;
        
        const steps = [
            {
                description: "Initialize variables",
                i: -1,
                expected: 1,
                current: null,
                conditions: [],
                operations: ["Initialize i=0, expected=1"],
                highlight: ["var-i", "var-expected"]
            },
            {
                description: "Check first element",
                i: 0,
                expected: 1,
                current: 1,
                conditions: ["current == expected (1 == 1) ✓"],
                operations: ["Compare arr[0]=1 with expected=1", "Match found, continue"],
                highlight: ["var-current"]
            },
            {
                description: "Move to next element",
                i: 1,
                expected: 2,
                current: 2,
                conditions: ["current == expected (2 == 2) ✓"],
                operations: ["i++ (0 → 1)", "expected++ (1 → 2)", "Compare arr[1]=2 with expected=2"],
                highlight: ["var-i", "var-expected"]
            },
            {
                description: "Check third element",
                i: 2,
                expected: 3,
                current: 4,
                conditions: ["current == expected (4 == 3) ✗"],
                operations: ["i++ (1 → 2)", "expected++ (2 → 3)", "Compare arr[2]=4 with expected=3"],
                highlight: ["var-current", "var-expected"]
            },
            {
                description: "Found mismatch",
                i: 2,
                expected: 3,
                current: 4,
                conditions: ["Mismatch detected"],
                operations: ["arr[2]=4 ≠ expected=3", "Missing number found: 3"],
                highlight: ["var-missing"]
            },
            {
                description: "Return result",
                i: 2,
                expected: 3,
                current: 4,
                conditions: ["Algorithm complete"],
                operations: ["Return missing=3"],
                highlight: ["var-missing"]
            }
        ];
        
        function updateDisplay() {
            const step = steps[currentStep];
            
            document.getElementById('stepCounter').textContent = `Step ${currentStep} of ${maxSteps-1}`;
            
            document.querySelectorAll('.variable').forEach(v => {
                v.className = 'variable';
            });
            
            if (step.highlight) {
                step.highlight.forEach(id => {
                    const elem = document.getElementById(id);
                    if (elem) elem.classList.add('active');
                });
            }
            
            document.getElementById('var-i').textContent = `i: ${step.i >= 0 ? step.i : '-'}`;
            document.getElementById('var-expected').textContent = `expected: ${step.expected}`;
            document.getElementById('var-current').textContent = `current: ${step.current || '-'}`;
            document.getElementById('var-missing').textContent = `missing: ${currentStep >= 4 ? step.expected : '-'}`;
            
            const conditionsDiv = document.getElementById('conditions');
            conditionsDiv.innerHTML = '';
            step.conditions.forEach(cond => {
                const div = document.createElement('div');
                div.className = `condition ${cond.includes('✓') ? 'true' : 'false'}`;
                div.textContent = cond;
                conditionsDiv.appendChild(div);
            });
            
            const operationsDiv = document.getElementById('operations');
            operationsDiv.innerHTML = '';
            step.operations.forEach(op => {
                const div = document.createElement('div');
                div.className = 'operation';
                if (op.includes('++')) div.classList.add('increment');
                if (op.includes('Compare')) div.classList.add('compare');
                if (op.includes('Return')) div.classList.add('result');
                div.textContent = op;
                operationsDiv.appendChild(div);
            });
            
            document.querySelectorAll('.array-cell').forEach((cell, idx) => {
                cell.className = 'array-cell';
                if (idx === step.i) {
                    cell.classList.add('current');
                }
            });
            
            document.querySelectorAll('.pointer').forEach(p => p.remove());
            if (step.i >= 0) {
                const cell = document.getElementById(`cell-${step.i}`);
                if (cell) {
                    const pointer = document.createElement('div');
                    pointer.className = 'pointer current';
                    pointer.textContent = 'i';
                    cell.appendChild(pointer);
                }
            }
            
            const resultText = currentStep >= 4 ? `Missing number: ${step.expected}` : 'Missing number: -';
            document.getElementById('result').textContent = resultText;
            
            let statusText = 'Algorithm Status: ';
            if (currentStep === 0) statusText += 'Ready to Start';
            else if (currentStep < 4) statusText += 'Scanning Array';
            else if (currentStep === 4) statusText += 'Mismatch Found!';
            else statusText += 'Complete';
            
            document.getElementById('resultDisplay').textContent = statusText;
            
            document.getElementById('prevBtn').disabled = currentStep === 0;
            document.getElementById('nextBtn').disabled = currentStep === maxSteps - 1;
        }
        
        function nextStep() {
            if (currentStep < maxSteps - 1) {
                currentStep++;
                updateDisplay();
            }
        }
        
        function previousStep() {
            if (currentStep > 0) {
                currentStep--;
                updateDisplay();
            }
        }
        
        function reset() {
            currentStep = 0;
            updateDisplay();
        }
        
        function toggleSection(sectionId) {
            const content = document.getElementById(sectionId);
            const header = content.previousElementSibling;
            if (content.style.display === 'block') {
                content.style.display = 'none';
                header.textContent = header.textContent.replace('▼', '▶');
            } else {
                content.style.display = 'block';
                header.textContent = header.textContent.replace('▶', '▼');
            }
        }
        
        updateDisplay();
    </script>
</body>
</html>

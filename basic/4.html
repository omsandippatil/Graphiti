<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Java Loop Constructs</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Courier New', monospace;
            background: white;
            color: black;
            height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 10px;
        }
        
        .header {
            border: 2px solid black;
            padding: 15px;
            margin-bottom: 10px;
            background: white;
        }
        
        .title { font-size: 18px; font-weight: bold; margin-bottom: 10px; }
        .syntax { font-size: 14px; margin-bottom: 8px; font-weight: bold; }
        .example { font-size: 13px; margin-bottom: 8px; color: #333; }
        .explanation { font-size: 14px; font-weight: bold; }
        
        .main-content {
            flex: 1;
            display: flex;
            gap: 15px;
            min-height: 0;
        }
        
        .visual-area {
            flex: 1;
            border: 2px solid black;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .controls {
            padding: 10px;
            border: 2px solid black;
            background: white;
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .btn {
            padding: 8px 16px;
            border: 2px solid black;
            background: white;
            cursor: pointer;
            font-family: inherit;
            font-size: 12px;
        }
        
        .btn:hover { background: #f0f0f0; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        
        .collapsible {
            border: 2px solid black;
            background: white;
            margin-top: 10px;
        }
        
        .collapse-header {
            padding: 10px;
            background: #f8f8f8;
            cursor: pointer;
            border-bottom: 1px solid black;
            font-weight: bold;
        }
        
        .collapse-content {
            padding: 15px;
            display: none;
            font-size: 12px;
            line-height: 1.4;
        }
        
        .flow-diagram {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        
        .flow-box {
            position: absolute;
            border: 2px solid black;
            background: white;
            padding: 8px;
            font-size: 11px;
            text-align: center;
            min-width: 80px;
        }
        
        .variable-display {
            position: absolute;
            top: 10px;
            right: 10px;
            border: 2px solid black;
            padding: 8px 12px;
            background: white;
            font-weight: bold;
            font-size: 12px;
            min-width: 120px;
        }
        
        .array-display {
            position: absolute;
            bottom: 20px;
            left: 20px;
            border: 2px solid black;
            background: white;
            padding: 8px;
            font-size: 11px;
            display: flex;
            gap: 5px;
        }
        
        .array-item {
            border: 1px solid black;
            padding: 4px 8px;
            background: white;
        }
        
        .array-item.current {
            background: #f0f0f0;
            border: 2px solid black;
        }
        
        .output-display {
            position: absolute;
            bottom: 10px;
            right: 10px;
            border: 2px solid black;
            background: white;
            padding: 8px;
            font-size: 11px;
            max-width: 150px;
        }
        
        .highlight {
            border: 3px solid black !important;
            background: #f0f0f0 !important;
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { border-width: 3px; }
            50% { border-width: 4px; }
        }
        
        .condition-result {
            position: absolute;
            background: white;
            border: 2px solid black;
            padding: 4px 8px;
            font-size: 10px;
            font-weight: bold;
        }
        
        .arrow {
            position: absolute;
            width: 2px;
            background: black;
        }
        
        .arrow::after {
            content: '';
            position: absolute;
            bottom: -6px;
            left: -4px;
            width: 0;
            height: 0;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 8px solid black;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="title" id="title">Traditional For Loop</div>
        <div class="syntax" id="syntax">for(int i = 0; i < arr.length; i++) { System.out.println(arr[i]); }</div>
        <div class="example" id="example">Input: arr = [10, 20, 30] → Output: 10, 20, 30 (each on new line)</div>
        <div class="explanation" id="explanation">Iterates through array elements using index i, printing each value</div>
    </div>
    
    <div class="main-content">
        <div class="visual-area">
            <div class="flow-diagram" id="visual"></div>
        </div>
    </div>
    
    <div class="controls">
        <button class="btn" id="prevBtn">Previous</button>
        <button class="btn" id="nextBtn">Next</button>
        <button class="btn" id="resetBtn">Reset</button>
        <span id="stepInfo">Step 1 of 9</span>
    </div>
    
    <div class="collapsible">
        <div class="collapse-header" onclick="toggleCollapse()">▶ Extended Notes & Theory</div>
        <div class="collapse-content" id="collapseContent">
            <strong>Extended Notes:</strong><br>
            • Loop efficiency varies by use case and data structure<br>
            • Enhanced for-each loops are preferred for simple iteration<br>
            • Infinite loops require explicit break conditions<br>
            • Labeled breaks allow complex nested loop control<br><br>
            
            <strong>Edge Cases:</strong><br>
            • Off-by-one errors in traditional loops<br>
            • ConcurrentModificationException in enhanced loops during modification<br>
            • Stack overflow in recursive implementations<br><br>
            
            <strong>Performance Considerations:</strong><br>
            • Traditional loops offer more control but require careful bounds checking<br>
            • Enhanced loops are safer but less flexible for complex iteration patterns<br>
            • Switch expressions (Java 14+) can be more efficient than if-else chains
        </div>
    </div>

    <script>
        const topics = [
            {
                title: "Traditional For Loop",
                syntax: "for(int i = 0; i < arr.length; i++) { System.out.println(arr[i]); }",
                example: "Input: arr = [10, 20, 30] → Output: 10, 20, 30 (each on new line)",
                explanation: "Iterates through array elements using index i, printing each value",
                visual: "forLoop",
                data: { array: [10, 20, 30], variable: "i" }
            },
            {
                title: "Enhanced For-Each Loop", 
                syntax: "for(int num : numbers) { System.out.println(num * 2); }",
                example: "Input: numbers = [3, 7, 1] → Output: 6, 14, 2",
                explanation: "Iterates through each element directly, doubling and printing each value",
                visual: "forEach",
                data: { array: [3, 7, 1], variable: "num" }
            },
            {
                title: "Infinite For Loop",
                syntax: "for(;;) { if(input.equals(\"quit\")) break; processInput(); }",
                example: "Input: \"hello\", \"world\", \"quit\" → Output: processes hello, world, then exits",
                explanation: "Runs indefinitely until break condition is met",
                visual: "infiniteFor",
                data: { inputs: ["hello", "world", "quit"] }
            },
            {
                title: "Labeled For Loop",
                syntax: "outer: for(int i=0; i<2; i++) { inner: for(int j=0; j<2; j++) { if(j==1) break outer; } }",
                example: "Input: 2x2 matrix → Output: processes [0,0] then breaks both loops",
                explanation: "Controls nested loop execution using labels to break multiple levels",
                visual: "labeledFor",
                data: { matrix: [[1,2],[3,4]], outerVar: "i", innerVar: "j" }
            },
            {
                title: "While Loop",
                syntax: "while(count < 3) { System.out.println(\"Count: \" + count); count++; }",
                example: "Input: count = 0 → Output: \"Count: 0\", \"Count: 1\", \"Count: 2\"",
                explanation: "Repeats block while condition is true, checking before each iteration",
                visual: "whileLoop",
                data: { variable: "count", initialValue: 0, limit: 3 }
            },
            {
                title: "Do-While Loop",
                syntax: "do { System.out.println(\"Value: \" + x); x++; } while(x < 2);",
                example: "Input: x = 1 → Output: \"Value: 1\", \"Value: 2\" (executes twice)",
                explanation: "Executes block first, then checks condition for continuation",
                visual: "doWhile",
                data: { variable: "x", initialValue: 1, limit: 3 }
            },
            {
                title: "If-Else Statement",
                syntax: "if(age >= 18) { status = \"Adult\"; } else { status = \"Minor\"; }",
                example: "Input: age = 20 → Output: status = \"Adult\"",
                explanation: "Executes different code blocks based on condition evaluation",
                visual: "ifElse",
                data: { variable: "age", value: 20, result: "Adult" }
            },
            {
                title: "Switch-Case Statement",
                syntax: "switch(grade) { case 'A': points = 4; break; case 'B': points = 3; break; }",
                example: "Input: grade = 'A' → Output: points = 4",
                explanation: "Selects execution path from multiple options based on variable value",
                visual: "switchCase",
                data: { variable: "grade", value: "A", cases: {A: 4, B: 3, C: 2}, result: 4 }
            },
            {
                title: "Navigation Complete",
                syntax: "window.location.href = './index.html';",
                example: "Input: user navigation → Output: redirects to index.html",
                explanation: "Navigates browser to the specified URL location",
                visual: "navigation",
                data: {}
            }
        ];

        let currentStep = 0;
        let animationInterval;

        function updateDisplay() {
            const topic = topics[currentStep];
            document.getElementById('title').textContent = topic.title;
            document.getElementById('syntax').textContent = topic.syntax;
            document.getElementById('example').textContent = topic.example;
            document.getElementById('explanation').textContent = topic.explanation;
            document.getElementById('stepInfo').textContent = `Step ${currentStep + 1} of ${topics.length}`;
            
            document.getElementById('prevBtn').disabled = currentStep === 0;
            document.getElementById('nextBtn').disabled = currentStep === topics.length - 1;
            
            clearInterval(animationInterval);
            renderVisual(topic.visual, topic.data);
        }

        function renderVisual(type, data) {
            const visual = document.getElementById('visual');
            visual.innerHTML = '';

            switch(type) {
                case 'forLoop':
                    renderForLoop(visual, data);
                    break;
                case 'forEach':
                    renderForEach(visual, data);
                    break;
                case 'infiniteFor':
                    renderInfiniteFor(visual, data);
                    break;
                case 'labeledFor':
                    renderLabeledFor(visual, data);
                    break;
                case 'whileLoop':
                    renderWhileLoop(visual, data);
                    break;
                case 'doWhile':
                    renderDoWhile(visual, data);
                    break;
                case 'ifElse':
                    renderIfElse(visual, data);
                    break;
                case 'switchCase':
                    renderSwitchCase(visual, data);
                    break;
                case 'navigation':
                    renderNavigation(visual);
                    break;
            }
        }

        function renderForLoop(container, data) {
            container.innerHTML = `
                <div class="flow-box" style="top: 20px; left: 50px;" id="init">i = 0</div>
                <div class="flow-box" style="top: 80px; left: 50px;" id="condition">i < ${data.array.length}?</div>
                <div class="flow-box" style="top: 140px; left: 50px;" id="body">print arr[i]</div>
                <div class="flow-box" style="top: 200px; left: 50px;" id="increment">i++</div>
                <div class="flow-box" style="top: 80px; left: 200px;" id="end">Exit</div>
                <div class="variable-display">i = 0<br>arr.length = ${data.array.length}</div>
                <div class="array-display">
                    ${data.array.map((val, idx) => `<div class="array-item" data-index="${idx}">[${idx}] ${val}</div>`).join('')}
                </div>
                <div class="output-display">Output:<br><span id="output-text"></span></div>
            `;
            
            animateForLoop(data);
        }

        function renderForEach(container, data) {
            container.innerHTML = `
                <div class="flow-box" style="top: 40px; left: 50px;" id="start">Get next element</div>
                <div class="flow-box" style="top: 100px; left: 50px;" id="assign">num = element</div>
                <div class="flow-box" style="top: 160px; left: 50px;" id="process">print num * 2</div>
                <div class="flow-box" style="top: 100px; left: 200px;" id="done">Done</div>
                <div class="variable-display">num = ?<br>result = ?</div>
                <div class="array-display">
                    ${data.array.map((val, idx) => `<div class="array-item" data-index="${idx}">${val}</div>`).join('')}
                </div>
                <div class="output-display">Output:<br><span id="output-text"></span></div>
            `;
            
            animateForEach(data);
        }

        function renderInfiniteFor(container, data) {
            container.innerHTML = `
                <div class="flow-box" style="top: 40px; left: 50px;" id="start">Start Loop</div>
                <div class="flow-box" style="top: 100px; left: 50px;" id="read">Read input</div>
                <div class="flow-box" style="top: 160px; left: 50px;" id="check">input == "quit"?</div>
                <div class="flow-box" style="top: 220px; left: 20px;" id="process">Process input</div>
                <div class="flow-box" style="top: 160px; left: 200px;" id="exit">Break & Exit</div>
                <div class="variable-display">input = "${data.inputs[0]}"</div>
                <div class="array-display">
                    Inputs: ${data.inputs.map(inp => `<div class="array-item">"${inp}"</div>`).join('')}
                </div>
                <div class="output-display">Processing:<br><span id="output-text"></span></div>
            `;
            
            animateInfiniteFor(data);
        }

        function renderLabeledFor(container, data) {
            container.innerHTML = `
                <div class="flow-box" style="top: 20px; left: 20px;" id="outer">outer: i = 0</div>
                <div class="flow-box" style="top: 80px; left: 40px;" id="inner">inner: j = 0</div>
                <div class="flow-box" style="top: 140px; left: 60px;" id="check">j == 1?</div>
                <div class="flow-box" style="top: 200px; left: 80px;" id="break">break outer</div>
                <div class="flow-box" style="top: 80px; left: 200px;" id="exit">Exit Both</div>
                <div class="variable-display">i = 0<br>j = 0<br>matrix[i][j] = ${data.matrix[0][0]}</div>
                <div class="array-display">
                    Matrix: ${data.matrix.flat().map((val, idx) => `<div class="array-item">[${Math.floor(idx/2)},${idx%2}] ${val}</div>`).join('')}
                </div>
            `;
            
            animateLabeledFor(data);
        }

        function renderWhileLoop(container, data) {
            container.innerHTML = `
                <div class="flow-box" style="top: 40px; left: 50px;" id="check">count < ${data.limit}?</div>
                <div class="flow-box" style="top: 100px; left: 50px;" id="body">print "Count: " + count</div>
                <div class="flow-box" style="top: 160px; left: 50px;" id="increment">count++</div>
                <div class="flow-box" style="top: 40px; left: 200px;" id="exit">Exit</div>
                <div class="variable-display">count = ${data.initialValue}<br>limit = ${data.limit}</div>
                <div class="output-display">Output:<br><span id="output-text"></span></div>
            `;
            
            animateWhileLoop(data);
        }

        function renderDoWhile(container, data) {
            container.innerHTML = `
                <div class="flow-box" style="top: 40px; left: 50px;" id="body">print "Value: " + x</div>
                <div class="flow-box" style="top: 100px; left: 50px;" id="increment">x++</div>
                <div class="flow-box" style="top: 160px; left: 50px;" id="check">x < ${data.limit}?</div>
                <div class="flow-box" style="top: 160px; left: 200px;" id="exit">Exit</div>
                <div class="variable-display">x = ${data.initialValue}<br>limit = ${data.limit}</div>
                <div class="output-display">Output:<br><span id="output-text"></span></div>
            `;
            
            animateDoWhile(data);
        }

        function renderIfElse(container, data) {
            container.innerHTML = `
                <div class="flow-box" style="top: 40px; left: 100px;" id="condition">${data.variable} >= 18?</div>
                <div class="flow-box" style="top: 120px; left: 20px;" id="true">status = "Adult"</div>
                <div class="flow-box" style="top: 120px; left: 180px;" id="false">status = "Minor"</div>
                <div class="flow-box" style="top: 200px; left: 100px;" id="end">Continue</div>
                <div class="variable-display">${data.variable} = ${data.value}<br>status = "${data.result}"</div>
                <div class="condition-result" style="top: 70px; left: 130px;">${data.value >= 18 ? 'true' : 'false'}</div>
            `;
            
            animateIfElse(data);
        }

        function renderSwitchCase(container, data) {
            container.innerHTML = `
                <div class="flow-box" style="top: 20px; left: 100px;" id="switch">switch(${data.variable})</div>
                <div class="flow-box" style="top: 80px; left: 20px;" id="caseA">case 'A'</div>
                <div class="flow-box" style="top: 80px; left: 100px;" id="caseB">case 'B'</div>
                <div class="flow-box" style="top: 80px; left: 180px;" id="caseC">case 'C'</div>
                <div class="flow-box" style="top: 140px; left: 100px;" id="result">points = ${data.result}</div>
                <div class="variable-display">${data.variable} = '${data.value}'<br>points = ${data.result}</div>
            `;
            
            animateSwitchCase(data);
        }

        function renderNavigation(container) {
            container.innerHTML = `
                <div class="flow-box" style="top: 60px; left: 50px;" id="current">Current Page</div>
                <div class="flow-box" style="top: 120px; left: 50px;" id="navigate">window.location.href</div>
                <div class="flow-box" style="top: 180px; left: 50px;" id="index">"./index.html"</div>
            `;
            
            animateNavigation();
        }

        function animateForLoop(data) {
            const sequence = ['init', 'condition', 'body', 'increment'];
            let step = 0;
            let i = 0;
            let output = [];
            const variableDisplay = document.querySelector('.variable-display');
            const outputDisplay = document.getElementById('output-text');
            
            animationInterval = setInterval(() => {
                document.querySelectorAll('.flow-box, .array-item').forEach(el => el.classList.remove('highlight', 'current'));
                
                if (sequence[step] === 'condition' && i >= data.array.length) {
                    document.getElementById('end').classList.add('highlight');
                    clearInterval(animationInterval);
                    return;
                }
                
                document.getElementById(sequence[step]).classList.add('highlight');
                
                if (sequence[step] === 'condition') {
                    variableDisplay.innerHTML = `i = ${i}<br>arr.length = ${data.array.length}<br>i < arr.length = ${i < data.array.length}`;
                } else if (sequence[step] === 'body') {
                    document.querySelector(`[data-index="${i}"]`).classList.add('current');
                    output.push(data.array[i]);
                    outputDisplay.innerHTML = output.join('<br>');
                    variableDisplay.innerHTML = `i = ${i}<br>arr[${i}] = ${data.array[i]}<br>printing: ${data.array[i]}`;
                } else if (sequence[step] === 'increment') {
                    i++;
                    variableDisplay.innerHTML = `i = ${i}<br>arr.length = ${data.array.length}`;
                    step = 0;
                } else {
                    step = (step + 1) % sequence.length;
                }
                
                if (sequence[step] !== 'increment') {
                    step = (step + 1) % sequence.length;
                }
            }, 1800);
        }

        function animateForEach(data) {
            const sequence = ['start', 'assign', 'process'];
            let step = 0;
            let itemIndex = 0;
            let output = [];
            const variableDisplay = document.querySelector('.variable-display');
            const outputDisplay = document.getElementById('output-text');
            
            animationInterval = setInterval(() => {
                document.querySelectorAll('.flow-box, .array-item').forEach(el => el.classList.remove('highlight', 'current'));
                
                if (itemIndex >= data.array.length) {
                    document.getElementById('done').classList.add('highlight');
                    variableDisplay.innerHTML = `Loop complete<br>Processed ${itemIndex} items`;
                    clearInterval(animationInterval);
                    return;
                }
                
                document.getElementById(sequence[step]).classList.add('highlight');
                
                if (sequence[step] === 'start') {
                    document.querySelector(`[data-index="${itemIndex}"]`).classList.add('current');
                    variableDisplay.innerHTML = `Getting element ${itemIndex}<br>value = ${data.array[itemIndex]}`;
                } else if (sequence[step] === 'assign') {
                    variableDisplay.innerHTML = `num = ${data.array[itemIndex]}<br>ready to process`;
                } else if (sequence[step] === 'process') {
                    const result = data.array[itemIndex] * 2;
                    output.push(result);
                    outputDisplay.innerHTML = output.join('<br>');
                    variableDisplay.innerHTML = `num = ${data.array[itemIndex]}<br>result = ${result}`;
                    itemIndex++;
                    step = -1;
                }
                
                step = (step + 1) % sequence.length;
            }, 1800);
        }

        function animateInfiniteFor(data) {
            const sequence = ['start', 'read', 'check'];
            let step = 0;
            let inputIndex = 0;
            let output = [];
            const variableDisplay = document.querySelector('.variable-display');
            const outputDisplay = document.getElementById('output-text');
            
            animationInterval = setInterval(() => {
                document.querySelectorAll('.flow-box, .array-item').forEach(el => el.classList.remove('highlight', 'current'));
                
                if (inputIndex >= data.inputs.length) {
                    clearInterval(animationInterval);
                    return;
                }
                
                const currentInput = data.inputs[inputIndex];
                document.getElementById(sequence[step]).classList.add('highlight');
                
                if (sequence[step] === 'read') {
                    variableDisplay.innerHTML = `input = "${currentInput}"<br>checking condition...`;
                    document.querySelectorAll('.array-item')[inputIndex].classList.add('current');
                } else if (sequence[step] === 'check') {
                    if (currentInput === 'quit') {
                        document.getElementById('exit').classList.add('highlight');
                        variableDisplay.innerHTML = `input = "${currentInput}"<br>condition: true → BREAK`;
                        clearInterval(animationInterval);
                        return;
                    } else {
                        setTimeout(() => {
                            document.querySelectorAll('.flow-box').forEach(el => el.classList.remove('highlight'));
                            document.getElementById('process').classList.add('highlight');
                            output.push(`Processing: ${currentInput}`);
                            outputDisplay.innerHTML = output.join('<br>');
                            variableDisplay.innerHTML = `input = "${currentInput}"<br>condition: false → continue`;
                        }, 900);
                        inputIndex++;
                        step = 0;
                    }
                }
                
                if (sequence[step] !== 'check' || currentInput !== 'quit') {
                    step = (step + 1) % sequence.length;
                }
            }, 1800);
        }

        function animateLabeledFor(data) {
            const sequence = ['outer', 'inner', 'check', 'break', 'exit'];
            let step = 0;
            let i = 0, j = 0;
            const variableDisplay = document.querySelector('.variable-display');
            
            animationInterval = setInterval(() => {
                document.querySelectorAll('.flow-box').forEach(el => el.classList.remove('highlight'));
                document.getElementById(sequence[step]).classList.add('highlight');
                
                if (sequence[step] === 'outer') {
                    variableDisplay.innerHTML = `i = ${i}<br>Starting outer loop`;
                } else if (sequence[step] === 'inner') {
                    variableDisplay.innerHTML = `i = ${i}<br>j = ${j}<br>matrix[${i}][${j}] = ${data.matrix[i][j]}`;
                } else if (sequence[step] === 'check') {
                    variableDisplay.innerHTML = `j = ${j}<br>j == 1? ${j === 1}<br>${j === 1 ? 'Breaking outer loop' : 'Continue'}`;
                    if (j === 1) {
                        step = 3;
                    } else {
                        j++;
                        step = 1;
                    }
                } else if (sequence[step] === 'break') {
                    variableDisplay.innerHTML = `Breaking outer loop<br>i = ${i}, j = ${j}`;
                } else if (sequence[step] === 'exit') {
                    variableDisplay.innerHTML = `Exited both loops<br>Final: i = ${i}, j = ${j}`;
                    clearInterval(animationInterval);
                    return;
                }
                
                if (sequence[step] !== 'check') {
                    step = (step + 1) % sequence.length;
                }
            }, 1800);
        }

        function animateWhileLoop(data) {
            const sequence = ['check', 'body', 'increment'];
            let step = 0;
            let count = data.initialValue;
            let output = [];
            const variableDisplay = document.querySelector('.variable-display');
            const outputDisplay = document.getElementById('output-text');
            
            animationInterval = setInterval(() => {
                document.querySelectorAll('.flow-box').forEach(el => el.classList.remove('highlight'));
                
                if (sequence[step] === 'check' && count >= data.limit) {
                    document.getElementById('exit').classList.add('highlight');
                    variableDisplay.innerHTML = `count = ${count}<br>count < ${data.limit}? false<br>EXIT`;
                    clearInterval(animationInterval);
                    return;
                }
                
                document.getElementById(sequence[step]).classList.add('highlight');
                
                if (sequence[step] === 'check') {
                    variableDisplay.innerHTML = `count = ${count}<br>count < ${data.limit}? ${count < data.limit}`;
                } else if (sequence[step] === 'body') {
                    output.push(`Count: ${count}`);
                    outputDisplay.innerHTML = output.join('<br>');
                    variableDisplay.innerHTML = `count = ${count}<br>Printing: Count: ${count}`;
                } else if (sequence[step] === 'increment') {
                    count++;
                    variableDisplay.innerHTML = `count = ${count}<br>Incremented count`;
                    step = -1;
                }
                
                step = (step + 1) % sequence.length;
            }, 1800);
        }

        function animateDoWhile(data) {
            const sequence = ['body', 'increment', 'check'];
            let step = 0;
            let x = data.initialValue;
            let output = [];
            const variableDisplay = document.querySelector('.variable-display');
            const outputDisplay = document.getElementById('output-text');
            
            animationInterval = setInterval(() => {
                document.querySelectorAll('.flow-box').forEach(el => el.classList.remove('highlight'));
                document.getElementById(sequence[step]).classList.add('highlight');
                
                if (sequence[step] === 'body') {
                    output.push(`Value: ${x}`);
                    outputDisplay.innerHTML = output.join('<br>');
                    variableDisplay.innerHTML = `x = ${x}<br>Printing: Value: ${x}`;
                } else if (sequence[step] === 'increment') {
                    x++;
                    variableDisplay.innerHTML = `x = ${x}<br>Incremented x`;
                } else if (sequence[step] === 'check') {
                    variableDisplay.innerHTML = `x = ${x}<br>x < ${data.limit}? ${x < data.limit}`;
                    if (x >= data.limit) {
                        setTimeout(() => {
                            document.querySelectorAll('.flow-box').forEach(el => el.classList.remove('highlight'));
                            document.getElementById('exit').classList.add('highlight');
                            variableDisplay.innerHTML = `x = ${x}<br>Condition false → EXIT`;
                        }, 900);
                        clearInterval(animationInterval);
                        return;
                    } else {
                        step = -1;
                    }
                }
                
                step = (step + 1) % sequence.length;
            }, 1800);
        }

        function animateIfElse(data) {
            const sequence = ['condition', data.value >= 18 ? 'true' : 'false', 'end'];
            let step = 0;
            const variableDisplay = document.querySelector('.variable-display');
            
            animationInterval = setInterval(() => {
                document.querySelectorAll('.flow-box').forEach(el => el.classList.remove('highlight'));
                document.getElementById(sequence[step]).classList.add('highlight');
                
                if (sequence[step] === 'condition') {
                    variableDisplay.innerHTML = `${data.variable} = ${data.value}<br>Evaluating: ${data.value} >= 18`;
                } else if (sequence[step] === 'true') {
                    variableDisplay.innerHTML = `${data.variable} = ${data.value}<br>Condition: true<br>status = "Adult"`;
                } else if (sequence[step] === 'false') {
                    variableDisplay.innerHTML = `${data.variable} = ${data.value}<br>Condition: false<br>status = "Minor"`;
                } else if (sequence[step] === 'end') {
                    variableDisplay.innerHTML = `${data.variable} = ${data.value}<br>Final status = "${data.result}"<br>Continue execution`;
                    clearInterval(animationInterval);
                    return;
                }
                
                step = (step + 1) % sequence.length;
            }, 1800);
        }

        function animateSwitchCase(data) {
            const sequence = ['switch', `case${data.value}`, 'result'];
            let step = 0;
            const variableDisplay = document.querySelector('.variable-display');
            
            animationInterval = setInterval(() => {
                document.querySelectorAll('.flow-box').forEach(el => el.classList.remove('highlight'));
                
                if (sequence[step] === 'switch') {
                    document.getElementById('switch').classList.add('highlight');
                    variableDisplay.innerHTML = `${data.variable} = '${data.value}'<br>Evaluating switch`;
                } else if (sequence[step] === `case${data.value}`) {
                    document.getElementById(`case${data.value}`).classList.add('highlight');
                    variableDisplay.innerHTML = `${data.variable} = '${data.value}'<br>Matching case '${data.value}'<br>Setting points = ${data.cases[data.value]}`;
                } else if (sequence[step] === 'result') {
                    document.getElementById('result').classList.add('highlight');
                    variableDisplay.innerHTML = `${data.variable} = '${data.value}'<br>points = ${data.result}<br>Break and continue`;
                    clearInterval(animationInterval);
                    return;
                }
                
                step = (step + 1) % sequence.length;
            }, 1800);
        }

        function animateNavigation() {
            const sequence = ['current', 'navigate', 'index'];
            let step = 0;
            
            animationInterval = setInterval(() => {
                document.querySelectorAll('.flow-box').forEach(el => el.classList.remove('highlight'));
                document.getElementById(sequence[step]).classList.add('highlight');
                step = (step + 1) % sequence.length;
                
                if (step === 0) {
                    clearInterval(animationInterval);
                    setTimeout(() => {
                        window.location.href = './index.html';
                    }, 1000);
                }
            }, 1500);
        }

        function toggleCollapse() {
            const content = document.getElementById('collapseContent');
            const header = document.querySelector('.collapse-header');
            
            if (content.style.display === 'none' || content.style.display === '') {
                content.style.display = 'block';
                header.textContent = '▼ Extended Notes & Theory';
            } else {
                content.style.display = 'none';
                header.textContent = '▶ Extended Notes & Theory';
            }
        }

        document.getElementById('nextBtn').onclick = () => {
            if (currentStep < topics.length - 1) {
                currentStep++;
                updateDisplay();
            }
        };

        document.getElementById('prevBtn').onclick = () => {
            if (currentStep > 0) {
                currentStep--;
                updateDisplay();
            }
        };

        document.getElementById('resetBtn').onclick = () => {
            currentStep = 0;
            updateDisplay();
        };

        updateDisplay();
    </script>
</body>
</html>
